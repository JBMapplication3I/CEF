<div class="row">
    <div ng-if="cefCheckoutCtrl.viewstate.isLoggedIn
                && cefCheckoutCtrl.cefConfig.featureSet.payments.wallet.enabled
                && (cefCheckoutCtrl.wallet | filter: { 'CreditCardNumber': '' }).length"
         class="col-sm-12">
        <div class="form-group">
            <label class="control-label hidden" for="ddlSelectedCard"
                   data-translate="ui.admin.checkout.views.paymentInformation.selectACard"></label>
            <select class="form-control"
                    id="ddlSelectedCard" name="ddlSelectedCard"
                    ng-change="cefCheckoutCtrl.updatePaymentDataWithWalletEntry(cefCheckoutCtrl.selectedCard)"
                    ng-options="entry as entry.Name for entry in cefCheckoutCtrl.wallet | filter: { 'CreditCardNumber': '' }"
                    ng-model="cefCheckoutCtrl.selectedCard">
                <option value=""
                        data-translate="ui.admin.checkout.views.paymentInformation.enterANewCard"></option>
            </select>
        </div>
    </div>
    <div ng-if="cefCheckoutCtrl.cefConfig.featureSet.payments.wallet.enabled && cefCheckoutCtrl.selectedCardIsFromWallet()"
         class="col-sm-12">
        <cef-checkout-wallet-credit-card>
        </cef-checkout-wallet-credit-card>
    </div>
    <div ng-if="!cefCheckoutCtrl.cefConfig.featureSet.payments.wallet.enabled || !cefCheckoutCtrl.selectedCardIsFromWallet()"
         class="col-sm-12">
        <!--Reference Name-->
        <div class="form-group"
             ng-class="{'has-error': cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.txtReferenceName.$invalid}"
             ng-if="cefCheckoutCtrl.cefConfig.featureSet.payments.wallet.enabled && cefCheckoutCtrl.viewstate.isLoggedIn">
            <label class="control-label" for="txtReferenceName"
                   data-translate="ui.admin.common.CardNickname"></label>
            <input type="text" class="form-control"
                   id="txtReferenceName" name="txtReferenceName"
                   ng-required="false"
                   ng-model="cefCheckoutCtrl.paymentData.ReferenceName" />
        </div>
        <p ng-if="cefCheckoutCtrl.cefConfig.featureSet.payments.wallet.enabled && cefCheckoutCtrl.viewstate.isLoggedIn"
           class="small"
           data-translate="ui.admin.checkout.modularCheckout.WalletReferenceName.Note"></p>
        <!--Cardholder Name-->
        <div class="form-group" ng-class="{'has-error': cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.txtCardHolderName.$invalid}">
            <label class="control-label" for="txtCardHolderName"
                   ><span data-translate="ui.admin.common.CardholderName"></span>&nbsp;<span class="text-danger">*</span></label>
            <input type="text" class="form-control"
                   id="txtCardHolderName" name="txtCardHolderName"
                   ng-required="true"
                   ng-model="cefCheckoutCtrl.paymentData.CardHolderName" />
        </div>
        <!--Card Number-->
        <div class="form-group" ng-class="{'has-error': cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$invalid}">
            <label class="control-label" for="txtCardNumber"
                   ><span data-translate="ui.admin.common.CardNumber"></span>&nbsp;<span class="text-danger">*</span></label>
            <div class="input-group">
                <input type="text" class="form-control"
                       id="txtCardNumber" name="txtCardNumber"
                       placeholder="1234 5678 9012 3456"
                       cc-number cc-format cc-eager-type
                       ng-required="true"
                       ng-change="cefCheckoutCtrl.payment.creditCard.type = cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType;"
                       ng-model="cefCheckoutCtrl.paymentData.CardNumber" />
                <div ng-if="cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType"
                     class="input-group-addon" aria-hidden="true">
                    <i class="fa" ng-class="{
                        'fa-cc-amex': cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType == 'American Express',
                        'fa-cc-discover': cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType == 'Discover',
                        'fa-cc-mastercard': cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType == 'MasterCard'
                                            || cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType == 'Diners Club',
                        'fa-cc-visa': cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType == 'Visa'}"></i>
                    <span class="sr-only" ng-bind="cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType"></span>
                </div>
            </div>
        </div>
        <div class="row" cc-exp>
            <!--Month-->
            <div class="form-group col-sm-6" ng-class="{'has-error': cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.ddlExpirationMonth.$invalid}">
                <label class="control-label" for="ddlExpirationMonth"
                       ><span data-translate="ui.admin.checkout.views.paymentInformation.Month"></span>&nbsp;<span class="text-danger">*</span></label>
                <select class="form-control"
                        id="ddlExpirationMonth" name="ddlExpirationMonth"
                        cc-exp-month
                        ng-required="true"
                        ng-model="cefCheckoutCtrl.paymentData.ExpirationMonth"
                        ng-options="month.Key as month.Value for month in cefCheckoutCtrl.expirationMonths">
                    <option value="" ng-disabled="true" data-translate="ui.admin.checkout.views.paymentInformation.Month"></option>
                </select>
            </div>
            <!--Year-->
            <div class="form-group col-sm-3" ng-class="{'has-error': cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.ddlExpirationYear.$invalid}">
                <label class="control-label" for="ddlExpirationYear"
                       ><span data-translate="ui.admin.checkout.views.paymentInformation.Year"></span>&nbsp;<span class="text-danger">*</span></label>
                <select class="form-control"
                        id="ddlExpirationYear" name="ddlExpirationYear"
                        cc-exp-year
                        ng-required="true"
                        ng-model="cefCheckoutCtrl.paymentData.ExpirationYear"
                        ng-options="y as y for y in cefCheckoutCtrl.expirationYears">
                    <option value="" ng-disabled="true" data-translate="ui.admin.checkout.views.paymentInformation.Year"></option>
                </select>
            </div>
            <!--CVV-->
            <div class="form-group col-sm-3" ng-class="{'has-error': cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.txtCVV.$invalid}">
                <label class="control-label" for="txtCVV"
                       ><span data-translate="ui.admin.common.CVV"></span>&nbsp;<span class="text-danger">*</span></label>
                <input type="text" class="form-control"
                       id="txtCVV" name="txtCVV"
                       placeholder="123"
                       cc-cvc cc-type="cefCheckoutCtrl.paymentData.CardNumber.$ccType"
                       ng-required="true"
                       ng-model="cefCheckoutCtrl.paymentData.CVV" />
            </div>
        </div>
        <div class="row" ng-if="cefCheckoutCtrl.forms.payment.creditCard.$dirty && cefCheckoutCtrl.forms.payment.creditCard.$invalid">
            <div class="col-md-12">
                <div ng-messages="cefCheckoutCtrl.forms.payment.creditCard.$error"
                     role="alert">
                    <div ng-message-exp="['ccNumber','card']" class="alert alert-danger mb-3">
                         <span data-translate="ui.admin.userDashboard2.controls.walletCard.ThisIsNotAValidCreditCardNum.Part1"></span>&nbsp;<!--
                         --><span ng-bind="cefCheckoutCtrl.forms.payment.creditCard.txtCardNumber.$ccEagerType"></span>&nbsp;<!--
                         --><span data-translate="ui.admin.userDashboard2.controls.walletCard.ThisIsNotAValidCreditCardNum.Part2"></span>
                    </div>
                    <div ng-message-exp="['ccCvc','cvc']" class="alert alert-danger mb-3">
                        <span data-translate="ui.admin.userDashboard2.controls.walletCard.ThisIsNotAValidSecurityCode"></span>
                    </div>
                    <div ng-message="ccExpMonth" class="alert alert-danger mb-3">
                        <span data-translate="ui.admin.userDashboard2.controls.walletCard.ThisIsNotAValidExpirationMonth"></span>
                    </div>
                    <div ng-message="ccExpYear" class="alert alert-danger mb-3">
                        <span data-translate="ui.admin.userDashboard2.controls.walletCard.ThisIsNotAValidExpirationYear"></span>
                    </div>
                    <div ng-message="ccExp" class="alert alert-danger mb-3">
                        <span data-translate="ui.admin.userDashboard2.controls.walletCard.TheSelectedExpirationDateHasPassed"></span>
                    </div>
                    <div ng-message="required" class="alert alert-danger mb-3">
                        <span data-translate="ui.admin.userDashboard2.controls.walletCard.AllFieldsAreRequired"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" ng-if="cefCheckoutCtrl.forms.payment.creditCard.$valid && cefCheckoutCtrl.cvCartService.totalTargetedCartsShippingRaw() > 0">
            <div class="col-md-12">
                <p data-translate="ui.admin.checkout.paymentMethods.creditCard.GrandTotalWithSplitTargets.Template"
                   translate-value-total="{{cefCheckoutCtrl.cvCartService.grandTotal()}}"></p>
            </div>
        </div>
    </div>
</div>
